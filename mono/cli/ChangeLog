2001-08-20  Dietmar Maurer  <dietmar@ximian.com>

	* object.c (mono_new_string): impl.

	* loader.c (mono_init): impl.

	* object.c (mono_new_utf16_string): impl.

	* class.h: replaced 'struct MonoMethod' with 'MonoMethod'

	* cli.h: removed #include <mono/cli/object.h> 

Sat Aug 18 12:42:26 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.c, class.h: load also the methods when loading a class.

2001-08-10  Dietmar Maurer  <dietmar@ximian.com>

	* object.c (mono_object_clone): impl.

2001-08-09  Dietmar Maurer  <dietmar@ximian.com>

	* object.c (mono_new_szarray): impl.

	* loader.c (mono_typedef_from_name): return the token, not the index
	(mono_get_corlib): impl.
	(mono_get_array_class_info): impl.
	(method_from_memberref): add array support
	(mono_get_method): support INTERNAL_CALL

	* class.c (mono_class_create_from_typedef): Array support,
	code cleanup, store the token_type, not the token index, added
	flag for value types.
	(mono_type_to_tydedef): impl.
	(mono_class_create_from_typespec): impl.
	(mono_array_class_get): impl.
	(mono_class_get): support TYPE_SPEC token.

2001-08-06  Dietmar Maurer  <dietmar@ximian.com>

	* cli.h: renamed MonoMethodManaged to MonoMethodNormal

	* loader.h: removed.

	* object.h: added MonoArrayObject and MonoStringObject

	* loader.c (mono_typedef_from_name):
	s/typedef_from_name/(mono_typedef_from_name and made it public.

	* class.c (class_compute_field_layout): skip the FIELD signature
	(mono_class_create_from_typedef): bug fix: field.last was wrong
	(class_compute_field_layout): added some code to make it work for
	classes with EXPLICIT_LAYOUT but no offsets specified (I observed
	that behaviour on System.Array)

2001-08-02  Dietmar Maurer  <dietmar@ximian.com>

	* loader.c (mono_get_string_class_info): do a strcmp to check
	if it is System.String instead of using magic numbers.
	(mono_map_dll): impl.
	(mono_get_method): bug fix: pass index - 1 to fill_pinvoke_info

	* class.c (mono_class_create_from_typedef): do a strcmp to check
	if it is System.Object instead of using magic numbers.

Wed Aug 1 22:48:29 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.c, class.h: mono_field_type_size () moved to metadata.
	Take correctly into account alignment when laying out
	class fields. Fix 5 to 0 magc number (to check for System.Object).

2001-08-01  Dietmar Maurer  <dietmar@ximian.com>

	* loader.c (mono_get_string_class_info): impl.
	(methoddef_from_memberref): added check for references into mscorlib

	* class.c (mono_class_create_from_typedef): better check for root
	object 

Tue Jul 31 17:45:44 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.c, cli.h, loader.c: massive namespace cleanup.

2001-07-31  Dietmar Maurer  <dietmar@ximian.com>

	* cli.h: added pinvoke flags to MonoMethodPInvoke, moved method
	implementation flags to MonoMethod

Mon Jul 30 20:05:23 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* cli.h, loader.c: usa a char *name field in MonoMethod instead
	of the name_idx token.

Fri Jul 27 20:51:47 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.h, class.c: add inited field to MonoClass.

Fri Jul 27 13:51:11 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.h, class.c: add a class_size member to MonoClass. We store
	the static fields after the other class data. Offsets for static
	fields are offsets from the MonoClass pointer.
	Properly initialize class->instance_size and deal with static
	fields when layouting them.

2001-07-27  Dietmar Maurer  <dietmar@ximian.com>

	* loader.c (ves_map_ffi_type): impl.
	(fill_pinvoke_info): impl.

Fri Jul 27 11:46:09 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* loader.c: implemented lookup of methods in a different MonoImage
	(needed to call the Syste.Object constructor, for example). Fixed the cache
	code to only check for methods defined in the image.

Thu Jul 26 15:31:01 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* loader.c: forgot to insert the method in the cache, not nice
	with a recursive fibonacci test case :-)

Thu Jul 26 13:17:22 CEST 2001 Paolo Molaro <lupus@ximian.com>

	* class.c: updates to match changes in metadata.
	Fix off by one errors. Implement creation of classes by typeref.
	Remove custom cache and use the class cache in MonoImage.
	* cli.h, loader.c: add MonoImage field to MonoMethod. Fill method cache
	in MonoImage. Updates to match changes in metadata.
	
2001-07-24  Miguel de Icaza  <miguel@ximian.com>

	* class.c (mono_class_create_from_typedef): Take into account
	parent classes for the size of a structure. 

	Still not ideal, but better than before.

	For the case of the interpreter, Paolo is right, there is not much
	use for a Field Map, as the way the Fields are located is through
	a token.

	(mono_class_init): Remove, initialize automatically.

	(mono_class_get_field): new function, returns the information
	about a field given a class and its token.
	
2001-07-23  Miguel de Icaza  <miguel@ximian.com>

	* object.h, object.c, class.h, class.c: Implemented the beginning
	of the object system. x

