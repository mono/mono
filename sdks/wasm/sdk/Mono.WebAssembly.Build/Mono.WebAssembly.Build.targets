<Project>
	<UsingTask AssemblyFile="$(MSBuildThisFileDirectory)Mono.WebAssembly.Build.dll" TaskName="WasmLinkAssemblies" />

	<PropertyGroup>
		<MonoWasmManagedOutputDir Condition="'$(MonoWasmManagedOutputDir)'==''">$(OutputPath)managed\</MonoWasmManagedOutputDir>
		<MonoWasmIntermediateDir>$(IntermediateOutputPath)monowasm</MonoWasmIntermediateDir>
		<MonoWasmLinkMode Condition="'$(MonoWasmLinkMode)'==''">SdkOnly</MonoWasmLinkMode>
		<MonoWasmI18n Condition="'$(MonoWasmI18n)'==''">None</MonoWasmI18n>
	</PropertyGroup>

	<!-- suppress local copy -->
	<Target Name="_CopyFilesMarkedCopyLocal" />

	<Target Name="_MonoWasmLink">
		<!--
          Inputs="@(IntermediateAssembly);@(ReferencePath);$(MSBuildThisFileFullPath)"
          Outputs="$(_MonoWasmLinkedAssembly)">-->
		<WasmLinkAssemblies
			RootAssembly="@(IntermediateAssembly)"
			Assemblies="@(ReferencePath)"
			FrameworkDir="$(MonoWasmFrameworkPath)"
			OutputDir="$(MonoWasmManagedOutputDir)"
			LinkMode="$(MonoWasmLinkMode)"
			LinkSkip="$(MonoWasmLinkSkip)"
			Debug="$(_DebugSymbolsProduced)"
			I18n="$(MonoWasmI18n)"
		/>
  </Target>

  <Target Name="_MonoWasmAssemblyCollectOutput"
          AfterTargets="_CheckForCompileOutputs"
          DependsOnTargets="_MonoWasmLink">
		<!--
    <ItemGroup Condition="Exists('@(IntermediateAssembly)')">
      <FileWrites Include="$(_MonoUE4IntermediateAsm)" />
      <IntermediateAssembly Remove="@(IntermediateAssembly)" />
      <IntermediateAssembly Include="$(_MonoUE4IntermediateAsm)" />
    </ItemGroup>
    <ItemGroup Condition="'$(_DebugSymbolsProduced)'== 'True'">
      <_DebugSymbolsIntermediatePath Remove="@(_DebugSymbolsIntermediatePath)" />
      <_DebugSymbolsIntermediatePath Include="$(_MonoUE4IntermediatePdb)" />
      <FileWrites Include="$(_MonoUE4IntermediatePdb)"/>
    </ItemGroup>
  -->
	</Target>
</Project>